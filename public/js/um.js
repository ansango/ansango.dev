(t=>{let{screen:{width:e,height:a},navigator:{language:r,doNotTrack:i,msDoNotTrack:n},location:o,document:l,history:c,top:s,doNotTrack:u}=t,{currentScript:d,referrer:h}=l;if(!d)return;let{hostname:f,href:m,origin:p}=o,y=m.startsWith("data:")?void 0:t.localStorage,g="data-",b="true",v=d.getAttribute.bind(d),w=v(g+"website-id"),S=v(g+"host-url"),$=v(g+"before-send"),k=v(g+"tag")||void 0,N="false"!==v(g+"auto-track"),T=v(g+"do-not-track")===b,A=v(g+"exclude-search")===b,_=v(g+"exclude-hash")===b,j=v(g+"domains")||"",x=j.split(",").map(t=>t.trim()),E=`${(S||"https://api-gateway.umami.dev").replace(/\/$/,"")}/api/send`,K=`${e}x${a}`,D=/data-umami-event-([\w-_]+)/,L=g+"umami-event",O=t=>{if(!t)return t;try{let e=new URL(t,o.href);return A&&(e.search=""),_&&(e.hash=""),e.toString()}catch(a){return t}},W=()=>({website:w,screen:K,language:r,title:l.title,hostname:f,url:G,referrer:H,tag:k,id:F||void 0}),B=(t,e,a)=>{a&&(H=G,(G=O(new URL(a,o.href).toString()))!==H&&setTimeout(U,300))},C=()=>M||!w||y&&y.getItem("umami.disabled")||j&&!x.includes(f)||T&&(()=>{let t=u||i||n;return 1===t||"1"===t||"yes"===t})(),I=async(e,a="event")=>{if(C())return;let r=t[$];if("function"==typeof r&&(e=await Promise.resolve(r(a,e))),e)try{let i=await fetch(E,{keepalive:!0,method:"POST",body:JSON.stringify({type:a,payload:e}),headers:{"Content-Type":"application/json",...void 0!==z&&{"x-umami-cache":z}},credentials:"omit"}),n=await i.json();n&&(M=!!n.disabled,z=n.cache)}catch(o){}},P=()=>{J||(J=!0,U(),(()=>{let t=(t,e,a)=>{let r=t[e];return(...e)=>(a.apply(null,e),r.apply(t,e))};c.pushState=t(c,"pushState",B),c.replaceState=t(c,"replaceState",B)})(),(()=>{let t=async t=>{let e=t.getAttribute(L);if(e){let a={};return t.getAttributeNames().forEach(e=>{let r=e.match(D);r&&(a[r[1]]=t.getAttribute(e))}),U(e,a)}};l.addEventListener("click",async e=>{let a=e.target,r=a.closest("a,button");if(!r)return t(a);let{href:i,target:n}=r;if(r.getAttribute(L)){if("BUTTON"===r.tagName)return t(r);if("A"===r.tagName&&i){let l="_blank"===n||e.ctrlKey||e.shiftKey||e.metaKey||e.button&&1===e.button;return l||e.preventDefault(),t(r).then(()=>{l||(("_top"===n?s.location:o).href=i)})}}},!0)})())},U=(t,e)=>I("string"==typeof t?{...W(),name:t,data:e}:"object"==typeof t?{...t}:"function"==typeof t?t(W()):W()),q=(t,e)=>("string"==typeof t&&(F=t),z="",I({...W(),data:"object"==typeof t?t:e},"identify"));t.umami||(t.umami={track:U,identify:q});let z,F,G=O(m),H=O(h.startsWith(p)?"":h),J=!1,M=!1;N&&!C()&&("complete"===l.readyState?P():l.addEventListener("readystatechange",P,!0))})(window);