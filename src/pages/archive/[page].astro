---
import { site } from "@/constants";
import { LayoutArchive } from "@/layout";
import { getArchiveStaticPathsPage } from "@/lib/astro";
import { getSortedCollectionsByYear } from "@/lib/collections";

export { getArchiveStaticPathsPage as getStaticPaths };

const { page } = Astro.params;
const entries = await getSortedCollectionsByYear();

const meta = site.pages.archive;
const entriesPerPage = meta.entriesPerPage || 10;
const isIndex = false;

if (!entries) {
  return Astro.redirect("/");
}
---

<LayoutArchive
  entries={entries}
  entriesPerPage={entriesPerPage}
  meta={meta}
  {page}
  {isIndex}
/>
