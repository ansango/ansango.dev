---

import { site } from "@/constants";
import { LayoutTag } from "@/layout";
import { getCollectionsByTag } from "@/lib/collections";
import { getTagStaticPathsPage } from "@/lib/astro";

export async function getStaticPaths() {
  return getTagStaticPathsPage();
}

const { page, tag } = Astro.params;

const entries = await getCollectionsByTag(tag);
const isIndex = false;
const meta = site.pages.tags;
const entriesPerPage = meta.entriesPerPage;

if (!entries) {
    return Astro.redirect("/");
}

---

<LayoutTag
  entries={entries}
  entriesPerPage={entriesPerPage}
  tag={tag}
  meta={meta}
  page={Number(page)}
  {isIndex}
/>
