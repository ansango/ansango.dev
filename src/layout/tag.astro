---
import { EntriesList, Pagination } from "@/components";
import type { Meta } from "@/content.config";
import { LayoutDefault } from "@/layout";
import { getPagination, type Entries } from "@/lib/collections";

interface Props {
  entries: Entries;
  page: number;
  entriesPerPage: number;
  isIndex: boolean;
  meta: Meta;
  tag: string;
}

const { entries, page, entriesPerPage, isIndex, tag, meta } = Astro.props;

const { currentPage, paginatedEntries, totalPages } = getPagination({
  isIndex,
  entries,
  page,
  entriesPerPage,
});
---

<LayoutDefault {...meta} type="main">
  <h1>
    <span class="text-muted">Tags / </span><span class="capitalize"
      >{tag.replace(/-/g, " ")}
    </span>
  </h1>
  <div class="flex flex-col h-full">
  <p class="text-muted">
    {entries.length}
    {entries.length === 1 ? "publicaci√≥n" : "publicaciones"} de esta etiqueta
  </p>
  
    <div class="flex-1">
      <EntriesList entries={paginatedEntries} />
    </div>
    <Pagination
      {currentPage}
      {totalPages}
      prevUrl={`/tags/${tag}${currentPage - 1 !== 1 ? "/" + (currentPage - 1) : ""}/`}
      nextUrl={`/tags/${tag}/${currentPage + 1}/`}
    />
  </div>
</LayoutDefault>
