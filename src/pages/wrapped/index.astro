---
import { LayoutDefault } from "@/components/layout";
import { site } from "@/constants";
import { getWrappedData } from "@/lib/wrapped";
import { WrappedHero, WrappedYearCard } from "@/components/organisms/wrapped";

// Get available years directly from library
const { validYears, scrobblesByYear, threshold } = await getWrappedData();

const meta = site.pages.wrapped;
---

<LayoutDefault {...meta} type="main">
  <WrappedHero />
  
  <section class="space-y-4">
    <h2>AÃ±os Disponibles</h2>
    <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3">
      {
        validYears.map((year: number) => (
          <WrappedYearCard
            year={year}
            scrobbles={scrobblesByYear[year]}
            threshold={threshold}
          />
        ))
      }
    </div>
  </section>
</LayoutDefault>
