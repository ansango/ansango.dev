---
import type { CollectionName } from "@/content.config";
import WikiTemplate from "./wiki.astro"
import DefaultTemplate from "./default.astro"
import { type Entries } from "@/lib/collections";
import { site } from "@/constants";

interface Props {
  collection: CollectionName;
  entries: Entries;
  page?: number;
  isIndex: boolean;
}

const { entries, page = 1, isIndex, collection } = Astro.props;
const meta = site.pages[collection as CollectionName];
const entriesPerPage = meta.entriesPerPage;

const TemplateCollection: Partial<
  Record<CollectionName, (_props: Props) => any>
> = {
  wiki: WikiTemplate,
};

const Component = TemplateCollection[collection] ?? DefaultTemplate;
---

<Component {collection} {entries} {meta} {page} {isIndex} {entriesPerPage} />
