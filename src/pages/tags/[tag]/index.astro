---
import { site } from "@/constants";
import { LayoutTag } from "@/layout";
import { getTagStaticPaths } from "@/lib/astro";
import { getCollectionsByTag} from "@/lib/collections";

export { getTagStaticPaths as getStaticPaths };

const { tag } = Astro.props;
const entries = await getCollectionsByTag(tag);
const meta = site.pages.tags;
const entriesPerPage = meta.entriesPerPage || 10;

if (!entries) {
    return Astro.redirect("/");
}
---

<LayoutTag
  entries={entries}
  entriesPerPage={entriesPerPage}
  tag={tag}
  meta={meta}
  page={1}
  isIndex
/>
